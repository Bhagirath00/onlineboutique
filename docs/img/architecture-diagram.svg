<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1024" height="768" viewBox="0 0 1024 768">
  <defs>
    <style>
      /*
        No background fill (transparent).
        Use currentColor so it matches GitHub light/dark themes.
        Keep a simple, clean "microservices diagram" style.
      */
      .stroke { stroke: currentColor; fill: none; stroke-width: 3; }
      .strokeThin { stroke: currentColor; fill: none; stroke-width: 2; }
      .dash { stroke: currentColor; fill: none; stroke-width: 3; stroke-dasharray: 10 10; }
      .dashThin { stroke: currentColor; fill: none; stroke-width: 2; stroke-dasharray: 8 8; }
      .text { fill: currentColor; font-family: Arial, Helvetica, sans-serif; }
      .title { font-size: 22px; }
      .label { font-size: 16px; }
      .box { stroke: currentColor; fill: none; stroke-width: 3; rx: 10; ry: 10; }
    </style>

    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,5 L0,10" fill="currentColor" />
    </marker>
  </defs>

  <!-- GitHub Actions (CI/CD) -->
  <rect class="box" x="412" y="20" width="200" height="60" />
  <text class="text label" x="512" y="45" text-anchor="middle">GitHub Actions</text>
  <text class="text label" x="512" y="65" text-anchor="middle">(CI/CD)</text>
  <line class="stroke" x1="512" y1="80" x2="512" y2="115" marker-end="url(#arrow)" />

  <!-- AWS EKS boundary (dashed), similar framing to the original diagram -->
  <rect class="dash" x="180" y="125" width="664" height="560" rx="18" ry="18" />
  <text class="text title" x="512" y="160" text-anchor="middle">AWS EKS</text>
  <rect class="dashThin" x="225" y="175" width="574" height="490" rx="16" ry="16" />

  <!-- External components -->
  <rect class="box" x="40" y="330" width="170" height="70" />
  <text class="text label" x="125" y="360" text-anchor="middle">Locust Load</text>
  <text class="text label" x="125" y="380" text-anchor="middle">Generator</text>

  <rect class="box" x="840" y="330" width="170" height="80" />
  <text class="text label" x="925" y="360" text-anchor="middle">Monitoring Stack</text>
  <text class="text label" x="925" y="382" text-anchor="middle">(Prometheus/Grafana)</text>

  <!-- Core services laid out like the original 11-microservice diagram (clean spacing) -->
  <rect class="box" x="320" y="210" width="170" height="55" />
  <text class="text label" x="405" y="244" text-anchor="middle">EmailService</text>

  <rect class="box" x="540" y="210" width="170" height="55" />
  <text class="text label" x="625" y="244" text-anchor="middle">AdService</text>

  <rect class="box" x="350" y="285" width="210" height="55" />
  <text class="text label" x="455" y="319" text-anchor="middle">CheckoutService</text>

  <rect class="box" x="610" y="285" width="190" height="55" />
  <text class="text label" x="705" y="319" text-anchor="middle">CartService</text>

  <rect class="box" x="300" y="345" width="180" height="55" />
  <text class="text label" x="390" y="379" text-anchor="middle">Frontend</text>

  <!-- Redis cache (simple cylinder) -->
  <ellipse class="stroke" cx="705" cy="395" rx="75" ry="16" />
  <path class="stroke" d="M630,395 L630,470" />
  <path class="stroke" d="M780,395 L780,470" />
  <ellipse class="stroke" cx="705" cy="470" rx="75" ry="16" />
  <text class="text label" x="705" y="435" text-anchor="middle">Cache (redis)</text>

  <rect class="box" x="300" y="420" width="200" height="55" />
  <text class="text label" x="400" y="454" text-anchor="middle">ShippingService</text>

  <rect class="box" x="560" y="500" width="200" height="55" />
  <text class="text label" x="660" y="534" text-anchor="middle">PaymentService</text>

  <rect class="box" x="460" y="580" width="200" height="55" />
  <text class="text label" x="560" y="614" text-anchor="middle">CurrencyService</text>

  <rect class="box" x="240" y="580" width="250" height="55" />
  <text class="text label" x="365" y="614" text-anchor="middle">ProductCatalogService</text>

  <rect class="box" x="680" y="580" width="280" height="55" />
  <text class="text label" x="820" y="614" text-anchor="middle">RecommendationService</text>

  <!-- Minimal arrows (avoid the "spaghetti" issue) -->
  <!-- Locust -> Frontend -->
  <line class="stroke" x1="210" y1="365" x2="300" y2="373" marker-end="url(#arrow)" />

  <!-- Frontend -> key services -->
  <line class="strokeThin" x1="480" y1="373" x2="610" y2="312" marker-end="url(#arrow)" />
  <line class="strokeThin" x1="480" y1="373" x2="350" y2="312" marker-end="url(#arrow)" />
  <line class="strokeThin" x1="390" y1="400" x2="400" y2="420" marker-end="url(#arrow)" />
  <line class="strokeThin" x1="390" y1="400" x2="365" y2="580" marker-end="url(#arrow)" />
  <line class="strokeThin" x1="420" y1="400" x2="560" y2="580" marker-end="url(#arrow)" />
  <line class="strokeThin" x1="450" y1="400" x2="820" y2="580" marker-end="url(#arrow)" />

  <!-- Checkout -> dependent services -->
  <line class="strokeThin" x1="455" y1="340" x2="405" y2="210" marker-end="url(#arrow)" />
  <line class="strokeThin" x1="455" y1="340" x2="660" y2="500" marker-end="url(#arrow)" />
  <line class="strokeThin" x1="455" y1="340" x2="400" y2="420" marker-end="url(#arrow)" />

  <!-- CartService -> Cache -->
  <line class="strokeThin" x1="705" y1="340" x2="705" y2="379" marker-end="url(#arrow)" />

  <!-- EKS -> Monitoring (single clean arrow) -->
  <line class="stroke" x1="844" y1="365" x2="840" y2="365" />
  <line class="stroke" x1="799" y1="405" x2="840" y2="370" marker-end="url(#arrow)" />

</svg>
